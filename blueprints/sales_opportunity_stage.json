{
  "name": "UpdateOpportunityStage",
  "label": "Update Opportunity Stage",
  "category": "DOMAIN",
  "targetSObject": "Opportunity",
  "operation": "UPDATE",
  "summary": "Updated Opportunity stage based on agent directive.",
  "checkpoint": "I will update the Opportunity stage for the requested deals. Proceed?",
  "keyFields": ["Id"],
  "inputs": [
    {
      "apiName": "Id",
      "fieldApiName": "Id",
      "label": "Opportunity Id",
      "dataType": "Id",
      "required": true,
      "usage": "FIELD"
    },
    {
      "apiName": "StageName",
      "fieldApiName": "StageName",
      "label": "New Stage",
      "dataType": "String",
      "required": true,
      "usage": "FIELD"
    },
    {
      "apiName": "CloseDate",
      "fieldApiName": "CloseDate",
      "label": "Revised Close Date",
      "dataType": "Date",
      "required": false,
      "usage": "FIELD"
    }
  ],
  "guardrails": [
    {
      "type": "FLS_EDIT",
      "params": {
        "fields": ["Id", "StageName", "CloseDate"]
      }
    },
    {
      "type": "ENUM_ALLOWED",
      "params": {
        "field": "StageName",
        "values": ["Prospecting", "Qualification", "Proposal", "Negotiation", "Closed Won", "Closed Lost"]
      }
    }
  ],
  "tags": ["sales", "opportunity", "update"],
  "description": "Updates opportunity stage with enumerated values and FLS guardrails."
}
